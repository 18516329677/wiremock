buildscript {
	repositories {
    	mavenRepo urls:'http://repo.smokejumperit.com'
	}
	dependencies {
    	classpath 'com.smokejumperit:gradle-plugins:0.7.3'
	}
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: com.smokejumperit.gradle.OneJarPlugin
sourceCompatibility = 1.6
version = 1.0

repositories {
	mavenCentral()
}

dependencies {
	compile "org.mortbay.jetty:jetty:6.1.26"
	compile "javax.servlet:servlet-api:2.4"
	compile "com.google.guava:guava:10.0"
	compile "org.codehaus.jackson:jackson-core-asl:1.8.5", "org.codehaus.jackson:jackson-mapper-asl:1.8.5" 
	
	testCompile "junit:junit:4.8"
	testCompile "org.hamcrest:hamcrest-all:1.1"
	testCompile "commons-httpclient:commons-httpclient:3.1"
	testCompile "org.springframework:spring-test:3.0.5.RELEASE", "org.springframework:spring-core:3.0.5.RELEASE"
	testCompile "org.jmock:jmock:2.5.1", "org.jmock:jmock-junit4:2.5.1" 
}

task "create-dirs" << {
   sourceSets.all*.java.srcDirs*.each { it.mkdirs() }
   sourceSets.all*.resources.srcDirs*.each { it.mkdirs() }
}

jar {
    manifest {
        attributes("Main-Class": "com.tomakehurst.wiremock.WireMock")
    }
}
